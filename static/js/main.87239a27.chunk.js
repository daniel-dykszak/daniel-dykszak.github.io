(this["webpackJsonpevents-plus"]=this["webpackJsonpevents-plus"]||[]).push([[0],{19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);n(1);var c,r=n(14),a=n.n(r),i=(n(19),n(4)),s=n(2),o=n.p+"static/media/logo.634daa0e.svg",l=n(3),d=function(e){var t=e.title.replace(/\s/g,"-");return"".concat(e.id,"-").concat(t)},u=function(e,t,n){return e.filter((function(e){return!t||("favorites"===t?n.has(e.id):e.category===t)}))},j=n(0),b=function(){var e=Object(l.c)((function(e){return e.events.list})),t=Object(l.c)((function(e){return e.events.favoriteIds})),n=function(e){return e.map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}))}(e),c=Object(s.g)().category;return Object(j.jsxs)("div",{className:"my-2",children:[Object(j.jsx)("div",{className:"d-block d-sm-none",children:Object(j.jsx)(v,{categories:n,selectedCategory:c})}),Object(j.jsx)("div",{className:"d-none d-sm-block",children:Object(j.jsx)(h,{categories:n,selectedCategory:c,events:e,favoriteIds:t})})]})},v=function(e){var t=e.categories,n=e.selectedCategory,c=Object(s.f)().push;return Object(j.jsxs)("div",{className:"d-flex flex-column",children:[Object(j.jsx)("label",{htmlFor:"eventGroupFilter",className:"form-label",children:"Filter By Category:"}),Object(j.jsxs)("select",{className:"form-select",id:"eventGroupFilter",onChange:function(e){var t=e.target.value;c("All"===t?"/events/":"/event-category/"+t)},value:n,children:[Object(j.jsx)("option",{children:"All"}),Object(j.jsx)("option",{value:"favorites",children:"Favorites"},"Favorites"),t.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)})),";"]})]})},h=function(e){var t=e.categories,n=e.events,c=e.selectedCategory,r=e.favoriteIds;return Object(j.jsxs)("div",{className:"d-flex flex-row",children:[Object(j.jsx)("span",{className:"me-3",children:"Filter by Category: "}),Object(j.jsxs)(i.c,{to:"/events/",activeClassName:"btn-primary",className:"btn ".concat(c?"btn-outline-dark":""," position-relative"),children:["All",Object(j.jsxs)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[n.length,Object(j.jsx)("span",{className:"visually-hidden",children:"items in category"})]})]}),Object(j.jsxs)(i.c,{to:"/event-category/favorites",className:"ms-3 btn ".concat("favorites"!==c?"btn-outline-dark":""," position-relative"),activeClassName:"btn-primary",children:["Favorites",Object(j.jsxs)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[r.size,Object(j.jsx)("span",{className:"visually-hidden",children:"favorite items"})]})]}),t.map((function(e){return Object(j.jsxs)(i.c,{to:"/event-category/"+e,activeClassName:"btn-primary",className:"btn position-relative ".concat(c!==e?"btn-outline-dark":""," ms-3"),children:[e,Object(j.jsxs)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[u(n,e||"",r).length,Object(j.jsx)("span",{className:"visually-hidden",children:"favorite items"})]})]},e)}))]})},f=n(22),m=n(5),O="EVENTS_LIST_FULFILLED",g="EVENTS_ADD_TO_FAVORITES",x="EVENTS_REMOVE_FROM_FAVORITES",p=n.p+"static/media/star-regular.1666a556.svg",y=n.p+"static/media/star-solid.c9be8e23.svg",N=function(e){var t=e.event,n=e.className,c=Object(l.c)((function(e){return e.events.favoriteIds})),r=Object(l.b)(),a=c.has(t.id),i=function(e){return r(function(e){return{type:g,event:e}}(e))},s=function(e){return r(function(e){return{type:x,event:e}}(e))},o=a?"Remove ".concat(t.title," from favourites"):"Add ".concat(t.title," to favourites");return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{type:"button",className:"btn btn-info "+n,onClick:function(){return a?s(t):i(t)},title:o,children:Object(j.jsx)("img",{height:20,width:20,src:a?y:p,alt:""})})})},w="GEOLOCATION_STORE_USER_LOCATION",E=n(10),S=n(11),F=function(){function e(){Object(E.a)(this,e)}return Object(S.a)(e,null,[{key:"getLocation",value:function(){return new Promise((function(e,t){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){return t(e)}))}))}},{key:"getDistanceInKm",value:function(e,t,n,c){function r(e){return e*(Math.PI/180)}var a=r(n-e),i=r(c-t),s=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r(e))*Math.cos(r(n))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}}]),e}(),k=function(e){var t=Object(l.c)((function(e){return e.geolocation.userLocation})),n=F.getDistanceInKm(e.lat,e.lng,t.coords.latitude,t.coords.longitude);return Object(j.jsxs)("span",Object(m.a)(Object(m.a)({},e),{},{children:[n.toFixed(1)," km from you"]}))};!function(e){e[e.SIMPLE=0]="SIMPLE",e[e.EXTENDED=1]="EXTENDED"}(c||(c={}));var I=function(e){var t=e.event,n=e.type,r=Object(l.c)((function(e){return!!e.geolocation.userLocation}));return Object(j.jsxs)("article",{className:"card h-100",children:[Object(j.jsx)("h2",{className:"card-header",children:Object(j.jsx)(i.b,{className:"link-primary me-4",title:"Go to event ".concat(t.title," details"),to:"/event/".concat(d(t)),children:t.title})}),Object(j.jsx)("div",{className:"position-absolute top-0 end-0",children:Object(j.jsx)(N,{event:t,className:"m-1"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h3",{className:"card-title",children:n===c.EXTENDED&&Object(j.jsx)("address",{children:t.location.address})}),Object(j.jsx)("p",{className:"card-text",children:t.description})]}),Object(j.jsxs)("footer",{className:"card-footer",children:[r&&Object(j.jsx)(k,{lat:parseFloat(t.location.lat),lng:parseFloat(t.location.lng),className:"text-muted h4"}),Object(j.jsx)(i.b,{to:"/event-category/"+t.category,title:"check ".concat(t.category," category"),className:"float-end btn btn-dark",children:t.category})]})]})},L=function(){var e=Object(l.c)((function(e){return e.events.list})),t=Object(l.c)((function(e){return e.events.favoriteIds})),n=Object(s.g)().category,r=u(e,n,t);return Object(j.jsxs)("section",{children:[Object(j.jsx)("header",{children:Object(j.jsx)(b,{})}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("ul",{className:"row list-unstyled",children:r.map((function(e){return Object(j.jsx)("li",{className:"col-md-4 col-sm-6 mb-4",children:Object(j.jsx)(I,{type:c.SIMPLE,event:e})},e.id)}))})}),Object(j.jsxs)("footer",{className:"my-2 ms-1",children:["Found ",r.length," events"]})]})},C=function(){return Object(j.jsxs)("ul",{className:"breadcrumb breadcrumb-container",children:[Object(j.jsx)("li",{className:"breadcrumb-item",children:Object(j.jsx)(i.b,{title:"home",to:"/",children:"Home"})}),Object(j.jsx)("li",{className:"breadcrumb-item breadcrumb-item__inactive",children:"Event list"})]})},T=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(C,{}),Object(j.jsx)(L,{})]})},_=function(e){var t=e.onLocationChange,n=e.className,c=e.children,r=Object(l.b)(),a=function(){F.getLocation().then((function(e){r({type:w,userLocation:e}),t(e)}))};return Object(j.jsx)("button",{className:n,type:"button",onClick:function(){return a()},children:c})},D=function(){var e=Object(s.f)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"p-5 mb-4 bg-light rounded-3",children:Object(j.jsxs)("div",{className:"container-fluid py-5",children:[Object(j.jsx)("p",{className:"col-md-8 fs-4",children:"Event plus help you find attractive locations near you."}),Object(j.jsx)(_,{className:"btn btn-primary btn-lg",onLocationChange:function(){return e.push("/events")},children:"Get my location to see events."}),Object(j.jsx)(i.b,{title:"proceed without location",to:"/events",className:"btn btn-secondary ms-2 mt-1",children:"Proceed without location"})]})})})},M=function(e){var t=e.event;return Object(j.jsx)("nav",{"aria-label":"breadcrumb",children:Object(j.jsxs)("ol",{className:"breadcrumb",children:[Object(j.jsx)("li",{className:"breadcrumb-item",children:Object(j.jsx)(i.b,{title:"Home",to:"/",children:"Home"})}),Object(j.jsx)("li",{className:"breadcrumb-item",children:Object(j.jsx)(i.b,{title:"Category ".concat(t.category),to:"/event-category/".concat(t.category),children:t.category})}),Object(j.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:t.title})]})})},A=function(){var e=Object(s.g)().eventName,t=e.split("-")[0],n=Object(l.c)((function(e){return function(e,t){return e.find((function(e){return e.id===t}))}(e.events.list,t)}));return Object(j.jsx)(j.Fragment,{children:void 0!==n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(M,{event:n}),Object(j.jsx)(I,{type:c.EXTENDED,event:n})]})})};function P(){return Object(j.jsxs)(i.a,{children:[Object(j.jsx)("header",{className:"mx-5",children:Object(j.jsx)("h1",{children:Object(j.jsx)("img",{src:o,alt:"Event plus Logo",style:{width:"16rem",height:"10rem"}})})}),Object(j.jsx)("main",{className:"mx-5",children:Object(j.jsxs)(s.c,{children:[Object(j.jsx)(s.a,{exact:!0,path:"/",children:Object(j.jsx)(D,{})}),Object(j.jsx)(s.a,{path:"/events",children:Object(j.jsx)(T,{})}),Object(j.jsx)(s.a,{path:"/event-category/:category",children:Object(j.jsx)(T,{})}),Object(j.jsx)(s.a,{path:"/event/:eventName",children:Object(j.jsx)(A,{})})]})})]})}var R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},U=n(13),X=function(){function e(){Object(E.a)(this,e)}return Object(S.a)(e,null,[{key:"getList",value:function(){return fetch("/api/events.json").then((function(e){return e.json()}))}}]),e}(),G=function(){function e(){Object(E.a)(this,e)}return Object(S.a)(e,null,[{key:"getList",value:function(){return X.getList()}},{key:"getStoredFavoritesSet",value:function(){var t=window.localStorage.getItem(e.localStorageFavKey);return t?new Set(t.split(",")):new Set}},{key:"storeFavoritesSet",value:function(t){var n=Array.from(t).join(",");window.localStorage.setItem(e.localStorageFavKey,n)}}]),e}();G.localStorageFavKey="favorites-event-ids";var K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||U.c,B=Object(U.b)({events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],favoriteIds:new Set},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(m.a)(Object(m.a)({},e),{},{list:t.list});case g:return Object(m.a)(Object(m.a)({},e),{},{favoriteIds:new Set([].concat(Object(f.a)(Array.from(e.favoriteIds)),[t.event.id]))});case x:return e.favoriteIds.delete(t.event.id),Object(m.a)(Object(m.a)({},e),{},{favoriteIds:new Set(e.favoriteIds)});default:return e}},geolocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(m.a)(Object(m.a)({},e),{},{userLocation:t.userLocation});default:return e}}}),H=Object(U.d)(B,{events:{list:[],favoriteIds:G.getStoredFavoritesSet()}},K(Object(U.a)((function(e){return function(t){return function(n){if(t(n),n.type===g||n.type===x){var c=e.getState().events.favoriteIds;G.storeFavoritesSet(c)}}}}))));Promise.resolve().then((function(){return a.a.render(Object(j.jsx)(l.a,{store:H,children:Object(j.jsx)(P,{})}),document.getElementById("root"))})).then((function(){return X.getList().then((function(e){H.dispatch(function(e){return{type:O,list:e}}(e))}))})),V(console.log),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");R?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):W(t,e)}))}}()}},[[37,1,2]]]);
//# sourceMappingURL=main.87239a27.chunk.js.map